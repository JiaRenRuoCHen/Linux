部署ceph集群
步骤一：安装部署软件ceph-deploy
1）在node1安装部署工具，学习工具的语法格式。
	]#  yum -y install ceph-deploy
	]#  ceph-deploy  --help
	]#  ceph-deploy mon --help

2）创建目录
	]#  mkdir ceph-cluster
	]#  cd ceph-cluster/

步骤二：部署Ceph集群
1）给所有节点安装ceph相关软件包。
	]# for i in node1 node2 node3
	   do
	   ssh  $i "yum -y install ceph-mon ceph-osd ceph-mds ceph-radosgw"
	   done 

2）创建Ceph集群配置,在ceph-cluster目录下生成Ceph配置文件。
	在ceph.conf配置文件中定义monitor主机是谁。
	]# ceph-deploy new node1 node2 node3


步骤三：创建OSD
备注：vdb1和vdb2这两个分区用来做存储服务器的journal缓存盘。
	]# for i in node1 node2 node3
	   do
         ssh $i "parted /dev/vdb mklabel gpt"
         ssh $i "parted /dev/vdb mkpart primary 1 50%"
         ssh $i "parted /dev/vdb mkpart primary 50% 100%"
         done

2）磁盘分区后的默认权限无法让ceph软件对其进行读写操作，需要修改权限。
node1、node2、node3都需要操作，这里以node1为例。
	]# chown  ceph.ceph  /dev/vdb1
	]# chown  ceph.ceph  /dev/vdb2
	#上面的权限修改为临时操作，重启计算机后，权限会再次被重置。
	#我们还需要将规则写到配置文件实现永久有效。
	#规则：如果设备名称为/dev/vdb1则设备文件的所有者和所属组都设置为ceph。
	#规则：如果设备名称为/dev/vdb2则设备文件的所有者和所属组都设置为ceph。
	]# vim /etc/udev/rules.d/70-vdb.rules
	ENV{DEVNAME}=="/dev/vdb1",OWNER="ceph",GROUP="ceph"
	ENV{DEVNAME}=="/dev/vdb2",OWNER="ceph",GROUP="ceph"

3）初始化清空磁盘数据（仅node1操作即可）。
	]# ceph-deploy disk  zap  node1:vdc   node1:vdd    
	]# ceph-deploy disk  zap  node2:vdc   node2:vdd
	]# ceph-deploy disk  zap  node3:vdc   node3:vdd   

4）创建OSD存储空间（仅node1操作即可）
	重要：很多同学在这里会出错！将主机名、设备名称输入错误！！！
	]# ceph-deploy osd create node1:vdc:/dev/vdb1 node1:vdd:/dev/vdb2  
	//创建osd存储设备，vdc为集群提供存储空间，vdb1提供JOURNAL缓存，
	//每个存储设备对应一个缓存设备，缓存需要SSD，不需要很大

	]# ceph-deploy osd create node2:vdc:/dev/vdb1 node2:vdd:/dev/vdb2

	]# ceph-deploy osd create node3:vdc:/dev/vdb1 node3:vdd:/dev/vdb
	

步骤四：验证测试
1) 查看集群状态。
	]#  ceph  -s














